<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Keleti Reform Ifj√∫s√°gi T√°bor Jelentkez√©s</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #121212;
      font-family: 'Segoe UI', sans-serif;
      color: #ffffff;
    }

    .container {
      max-width: 600px;
      margin: 40px auto;
      background-color: #1e1e1e;
      border-radius: 12px;
      padding: 30px 20px;
      box-shadow: 0 0 10px rgba(255, 165, 0, 0.3);
    }

    .header {
      background: linear-gradient(45deg, #17acca, #262df1);
      padding: 30px 20px;
      text-align: center;
      border-radius: 12px 12px 0 0;
    }

    .header img {
      width: 200px;
      margin-bottom: 10px;
    }

    h1, h2 {
      margin: 10px 0;
      color: #ffa500;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
      color: #ffffff;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      margin-top: 5px;
      background-color: #2e2e2e;
      color: #ffffff;
      font-size: 15px;
      box-sizing: border-box;
    }

    textarea {
      resize: vertical;
    }

    input[type="submit"] {
      background-color: #ffa500;
      color: #121212;
      font-weight: bold;
      margin-top: 20px;
      cursor: pointer;
    }

    input[type="submit"]:hover {
      background-color: #ffb733;
    }

    .parent-info {
      display: none;
      background-color: #292929;
      padding: 10px;
      border-radius: 8px;
      margin-top: 15px;
    }

    .download-link {
      text-align: center;
      margin-top: 20px;
    }

    .download-link a {
      color: #ff9900;
      font-weight: bold;
      text-decoration: underline;
    }

    .success-message {
      display: none;
      text-align: center;
      margin-top: 20px;
      padding: 12px;
      background-color: #28a745;
      color: white;
      border-radius: 8px;
      font-weight: bold;
      animation: fadeout 5s forwards;
    }

    @keyframes fadeout {
      0% { opacity: 1; }
      80% { opacity: 1; }
      100% { opacity: 0; display: none; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="https://drive.google.com/thumbnail?id=1NI5F0GP6Ygft7pz5SfP7PLU_rqQIFiFc&sz=800" alt="Keleti Reform Logo">
      <h1>Keleti Reform Ifj√∫s√°gi T√°bor</h1>
      <h3>Jelentkez√©si ≈±rlap</h3>
    </div>

    <form id="jelentkezesForm">
      <label for="nev">N√©v:</label>
      <input type="text" id="nev" name="nev" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="szuldatum">Sz√ºlet√©si d√°tum:</label>
      <input type="date" id="szuldatum" name="szuldatum" required onchange="checkAge()">

      <label for="gyulekezet">Gy√ºlekezet:</label>
      <select id="gyulekezet" name="gyulekezet" required>
        <option value="">--V√°lassz gy√ºlekezetet--</option>
        <option value="Ajaki Reform√°tus Egyh√°zk√∂zs√©g">Ajaki Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Anarcsi Reform√°tus Egyh√°zk√∂zs√©g">Anarcsi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Barab√°si Reform√°tus Egyh√°zk√∂zs√©g">Barab√°si Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Benki Reform√°tus Egyh√°zk√∂zs√©g">Benki Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Beregdar√≥ci Reform√°tus Egyh√°zk√∂zs√©g">Beregdar√≥ci Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Beregsur√°nyi Reform√°tus Egyh√°zk√∂zs√©g">Beregsur√°nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Berkeszi Reform√°tus Egyh√°zk√∂zs√©g">Berkeszi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Besztereci Reform√°tus Egyh√°zk√∂zs√©g">Besztereci Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Csarodai Reform√°tus Egyh√°zk√∂zs√©g">Csarodai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Demecseri Reform√°tus Egyh√°zk√∂zs√©g">Demecseri Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Dombr√°di Reform√°tus Egyh√°zk√∂zs√©g">Dombr√°di Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="D√∂gei Reform√°tus Egyh√°zk√∂zs√©g">D√∂gei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Eperjeskei Reform√°tus Egyh√°zk√∂zs√©g">Eperjeskei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Fej√©rcsei Reform√°tus Egyh√°zk√∂zs√©g">Fej√©rcsei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="F√©nyeslitkei Reform√°tus Egyh√°zk√∂zs√©g">F√©nyeslitkei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="G√©g√©nyi Reform√°tus Egyh√°zk√∂zs√©g">G√©g√©nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gel√©nesi Reform√°tus Egyh√°zk√∂zs√©g">Gel√©nesi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gemzsei Reform√°tus Egyh√°zk√∂zs√©g">Gemzsei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gergelyiugornyai Reform√°tus Egyh√°zk√∂zs√©g">Gergelyiugornyai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gul√°csi Reform√°tus Egyh√°zk√∂zs√©g">Gul√°csi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gy≈ër√∂cskei Reform√°tus Egyh√°zk√∂zs√©g">Gy≈ër√∂cskei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gyulah√°zai Reform√°tus Egyh√°zk√∂zs√©g">Gyulah√°zai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Gy√ºre Reform√°tus Egyh√°zk√∂zs√©g">Gy√ºre Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Hetei Reform√°tus Egyh√°zk√∂zs√©g">Hetei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Ilki Reform√°tus Egyh√°zk√∂zs√©g">Ilki Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="J√°ndi Reform√°tus Egyh√°zk√∂zs√©g">J√°ndi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="J√©kei Reform√°tus Egyh√°zk√∂zs√©g">J√©kei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="K√©ki Reform√°tus Egyh√°zk√∂zs√©g">K√©ki Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="K√©kcsei Reform√°tus Egyh√°zk√∂zs√©g">K√©kcsei Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Kisl√≥nya Reform√°tus Egyh√°zk√∂zs√©g">Kisl√≥nya Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Kisv√°rdai Reform√°tus Egyh√°zk√∂zs√©g">Kisv√°rdai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Kisvars√°nyi Reform√°tus Egyh√°zk√∂zs√©g">Kisvars√°nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Komor√≥i Reform√°tus Egyh√°zk√∂zs√©g">Komor√≥i Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Kop√≥csap√°ti Reform√°tus Egyh√°zk√∂zs√©g">Kop√≥csap√°ti Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="L√∂v≈ëpetri Reform√°tus Egyh√°zk√∂zs√©g">L√∂v≈ëpetri Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="M√°ndoki Reform√°tus Egyh√°zk√∂zs√©g">M√°ndoki Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="M√°rokpapi Reform√°tus Egyh√°zk√∂zs√©g">M√°rokpapi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="M√°tyusi Reform√°tus Egyh√°zk√∂zs√©g">M√°tyusi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Mez≈ëlad√°nyi Reform√°tus Egyh√°zk√∂zs√©g">Mez≈ëlad√°nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Nagyl√≥nyai Reform√°tus Egyh√°zk√∂zs√©g">Nagyl√≥nyai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Nagyvars√°nyi Reform√°tus Egyh√°zk√∂zs√©g">Nagyvars√°nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Ny√≠rkar√°szi Reform√°tus Egyh√°zk√∂zs√©g">Ny√≠rkar√°szi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Ny√≠rl√∂v≈ëi Reform√°tus Egyh√°zk√∂zs√©g">Ny√≠rl√∂v≈ëi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Ny√≠rtassi Reform√°tus Egyh√°zk√∂zs√©g">Ny√≠rtassi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Olcsvai Reform√°tus Egyh√°zk√∂zs√©g">Olcsvai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Papi Reform√°tus Egyh√°zk√∂zs√©g">Papi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="P√°trohai Reform√°tus Egyh√°zk√∂zs√©g">P√°trohai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="R√©tk√∂zberencsi Reform√°tus Egyh√°zk√∂zs√©g">R√©tk√∂zberencsi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="R√©varanyosi Reform√°tus Egyh√°zk√∂zs√©g">R√©varanyosi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Szabolcsb√°kai Reform√°tus Egyh√°zk√∂zs√©g">Szabolcsb√°kai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Szabolcsveresmarti Reform√°tus Egyh√°zk√∂zs√©g">Szabolcsveresmarti Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Sz√©kelyi Reform√°tus Egyh√°zk√∂zs√©g">Sz√©kelyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="T√°kosi Reform√°tus Egyh√°zk√∂zs√©g">T√°kosi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tarpai Reform√°tus Egyh√°zk√∂zs√©g">Tarpai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszaadonyi Reform√°tus Egyh√°zk√∂zs√©g">Tiszaadonyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszabezd√©di Reform√°tus Egyh√°zk√∂zs√©g">Tiszabezd√©di Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszakany√°ri Reform√°tus Egyh√°zk√∂zs√©g">Tiszakany√°ri Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszakerecsenyi Reform√°tus Egyh√°zk√∂zs√©g">Tiszakerecsenyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszamogyor√≥si Reform√°tus Egyh√°zk√∂zs√©g">Tiszamogyor√≥si Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszaszalkai Reform√°tus Egyh√°zk√∂zs√©g">Tiszaszalkai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszaszentm√°rtoni Reform√°tus Egyh√°zk√∂zs√©g">Tiszaszentm√°rtoni Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tiszavidi Reform√°tus Egyh√°zk√∂zs√©g">Tiszavidi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tivadari Reform√°tus Egyh√°zk√∂zs√©g">Tivadari Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tornyosp√°lcai Reform√°tus Egyh√°zk√∂zs√©g">Tornyosp√°lcai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Tuzs√©ri Reform√°tus Egyh√°zk√∂zs√©g">Tuzs√©ri Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="√öjken√©zi Reform√°tus Egyh√°zk√∂zs√©g">√öjken√©zi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="V√°mosatyai Reform√°tus Egyh√°zk√∂zs√©g">V√°mosatyai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="V√°s√°rosnam√©nyi Reform√°tus Egyh√°zk√∂zs√©g">V√°s√°rosnam√©nyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Vitkai Reform√°tus Egyh√°zk√∂zs√©g">Vitkai Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Z√°honyi Reform√°tus Egyh√°zk√∂zs√©g">Z√°honyi Reform√°tus Egyh√°zk√∂zs√©g</option>
        <option value="Zsurki Reform√°tus Egyh√°zk√∂zs√©g">Zsurki Reform√°tus Egyh√°zk√∂zs√©g</option>
      </select>

      <label for="etkezes">√âtkez√©si ig√©ny:</label>
      <select id="etkezes" name="etkezes" required>
        <option value="">--V√°lassz--</option>
        <option value="normal">Norm√°l</option>
        <option value="lakt√≥z">Lakt√≥zmentes</option>
        <option value="tejfeherje">Tejfeh√©rje-mentes</option>
        <option value="glutenmentes">Glut√©nmentes</option>
        <option value="vegetarianus">Veget√°ri√°nus</option>
      </select>

      <label for="gyogyszerallergia">Gy√≥gyszerallergia:</label>
      <textarea id="gyogyszerallergia" name="gyogyszerallergia" rows="2"></textarea>

      <div id="szuloInfo" class="parent-info">
        <label for="szulo_nev">Sz√ºl≈ë neve:</label>
        <input type="text" id="szulo_nev" name="szulo_nev">

        <label for="szulo_email">Sz√ºl≈ë email c√≠me:</label>
        <input type="email" id="szulo_email" name="szulo_email">

        <label for="szulo_tel">Sz√ºl≈ë telefonsz√°ma:</label>
        <input type="tel" id="szulo_tel" name="szulo_tel">
      </div>

      <input type="submit" value="Jelentkezem">
    </form>

    <div id="successMessage" class="success-message">
      ‚úÖ Sikeres jelentkez√©s!
    </div>

    <div class="download-link">
      üìÑ <a href="/szuloi-nyilatkozat.pdf" download>Sz√ºl≈ëi nyilatkozat let√∂lt√©se</a>
    </div>
  </div>

  <script>
    function checkAge() {
      const birthDate = new Date(document.getElementById("szuldatum").value);
      const today = new Date();
      let age = today.getFullYear() - birthDate.getFullYear();
      const m = today.getMonth() - birthDate.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;
      document.getElementById("szuloInfo").style.display = age < 18 ? "block" : "none";
    }

    document.getElementById("jelentkezesForm").addEventListener("submit", function(e) {
      e.preventDefault();
      this.reset();
      document.getElementById("szuloInfo").style.display = "none";
      const msg = document.getElementById("successMessage");
      msg.style.display = "block";
      setTimeout(() => msg.style.display = "none", 5000);
    });
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCr0Ovg-PZL75uXLFBu3cb1RmOEri2P76U",
      authDomain: "keletireformifjusaginapok.firebaseapp.com",
      projectId: "keletireformifjusaginapok",
      storageBucket: "keletireformifjusaginapok.firebasestorage.app",
      messagingSenderId: "925990914537",
      appId: "1:925990914537:web:7430ec041eea77858b6378"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Remove the old form submit listener since we'll handle it here
    const oldSubmitListener = document.getElementById("jelentkezesForm").onsubmit;
    document.getElementById("jelentkezesForm").onsubmit = null;

    document.getElementById("jelentkezesForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      // Get form values
      const formData = {
        nev: document.getElementById("nev").value,
        email: document.getElementById("email").value,
        szuldatum: document.getElementById("szuldatum").value,
        gyulekezet: document.getElementById("gyulekezet").value,
        etkezes: document.getElementById("etkezes").value,
        gyogyszerallergia: document.getElementById("gyogyszerallergia").value,
        szuloNev: document.getElementById("szulo_nev").value,
        szuloEmail: document.getElementById("szulo_email").value,
        szuloTel: document.getElementById("szulo_tel").value,
        timestamp: new Date()
      };

      // Debug log to verify data
      console.log("Form data to be sent:", formData);

      try {
        // Verify data is not empty
        if (!formData.nev || !formData.email || !formData.szuldatum || !formData.gyulekezet || !formData.etkezes) {
          throw new Error("Required fields are empty");
        }

        const docRef = await addDoc(collection(db, "jelentkezesek"), formData);
        console.log("Document written with ID:", docRef.id);

        // Reset form
        document.getElementById("jelentkezesForm").reset();
        document.getElementById("szuloInfo").style.display = "none";
        const msg = document.getElementById("successMessage");
        msg.style.display = "block";
        setTimeout(() => msg.style.display = "none", 5000);
      } catch (error) {
        console.error("Error details:", error);
        alert("Hiba t√∂rt√©nt a jelentkez√©s ment√©se k√∂zben: " + error.message);
      }
    });
  </script>
</body>
</html>
